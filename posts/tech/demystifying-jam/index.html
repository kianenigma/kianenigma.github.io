<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Demystifying JAM</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://fastly.jsdelivr.net/npm/mermaid@9.4.0/dist/mermaid.min.js"></script>
<script>
    mermaid.initialize({
        startOnLoad: true,
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/prism.min.js" integrity="sha512-hpZ5pDCF2bRCweL5WoA0/N1elet1KYL5mx3LP555Eg/0ZguaHawxNvEjF6O3rufAChs16HVNhEc6blF/rZoowQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/plugins/autoloader/prism-autoloader.min.js" integrity="sha512-sv0slik/5O0JIPdLBCR2A3XDg/1U3WuDEheZfI/DI5n8Yqc3h5kjrnr46FGBNiUAJF7rE4LHKwQ/SoSLRKAxEA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script src="https://cdn.jsdelivr.net/npm/lucide@0.115.0/dist/umd/lucide.min.js"></script>
<script>
    // Create callout icons
    window.addEventListener("load", () => {
        document.querySelectorAll(".callout").forEach((elem) => {
            const icon = getComputedStyle(elem).getPropertyValue('--callout-icon');
            const iconName = icon && icon.trim().replace(/^lucide-/, "");

            if (iconName) {
                const calloutTitle = elem.querySelector(".callout-title");

                if (calloutTitle) {
                    const calloutIconContainer = document.createElement("div");
                    const calloutIcon = document.createElement("i");

                    calloutIconContainer.appendChild(calloutIcon);
                    calloutIcon.setAttribute("icon-name", iconName);
                    calloutIconContainer.setAttribute("class", "callout-icon");
                    calloutTitle.insertBefore(calloutIconContainer, calloutTitle.firstChild);
                }
            }
        });

        lucide.createIcons();

        // Collapse callouts
        Array.from(document.querySelectorAll(".callout.is-collapsible")).forEach((elem) => {
            elem.querySelector('.callout-title').addEventListener("click", (event) => {
                if (elem.classList.contains("is-collapsed")) {
                    elem.classList.remove("is-collapsed");
                } else {
                    elem.classList.add("is-collapsed");
                }
            });
        });
    });
</script>


<script src="https://fastly.jsdelivr.net/npm/force-graph@1.43.0/dist/force-graph.min.js"></script>

<script defer src="https://fastly.jsdelivr.net/npm/@alpinejs/persist@3.11.1/dist/cdn.min.js"></script>
<script src="https://fastly.jsdelivr.net/npm/alpinejs@3.11.1/dist/cdn.min.js" defer></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/themes/prism-okaidia.min.css" integrity="sha512-mIs9kKbaw6JZFfSuo+MovjU+Ntggfoj8RwAmJbVXQ5mkAX5LlgETQEweFPI18humSPHymTb5iikEOKWF7I8ncQ==" crossorigin="anonymous" referrerpolicy="no-referrer">
<script src="https://fastly.jsdelivr.net/npm/whatwg-fetch@3.6.2/dist/fetch.umd.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<link href="/styles/digital-garden-base.css" rel="stylesheet">
    <link href="/styles/obsidian-base.css" rel="stylesheet">
    <link href="/styles/_theme.76b2bf3d.css" rel="stylesheet">


<link href="/styles/custom-style.css" rel="stylesheet">
<link rel="icon" href="/favicon.ico" sizes="any">
<link rel="icon" href="/favicon.svg" type="image/svg+xml">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<link rel="manifest" href="/manifest.webmanifest">





<style></style>
    
    
  </head>
  <body class="theme-dark markdown-preview-view markdown-rendered markdown-preview-section ">
    
    
    
      
    
    <div x-init="isDesktop = (window.innerWidth>=1400) ? true: false;" 
            x-on:resize.window="isDesktop = (window.innerWidth>=1400) ? true : false;" 
            x-data="{isDesktop: true, showFilesMobile: false}">

        <div x-show.important="!isDesktop" style="display: none;">
            <nav class="navbar">
    <div class="navbar-inner">
        <span style="font-size: 1.5rem; margin-right: 10px;" @click="showFilesMobile=!showFilesMobile"><i  icon-name="menu"></i></span>
        
        <a href="/" style="text-decoration: none;">
            <h1 style="margin: 15px !important;">Kian Paimani</h1>
        </a>
        
    </div>
    
    
        <div class="search-button align-icon" onclick="toggleSearch()">
    <span class="search-icon">
        <i icon-name="search" ></i>
    </span>
    <span class="search-text">
        <span>Search</span>
        <span style="font-size: 0.6rem; padding: 2px 2px 0 6px; text-align:center; transform: translateY(4px);" class="search-keys">
            CTRL + K
        </span>
    </span>
</div>
    
</nav>
        </div>
        
        <div x-show="showFilesMobile && !isDesktop" @click="showFilesMobile = false" style="display:none;" class="fullpage-overlay"></div>

      <nav class="filetree-sidebar"  x-show.important="isDesktop || showFilesMobile" style="display: none;">
        
         <a href="/" style="text-decoration: none;">
               <h1 style="text-align:center;">Kian Paimani</h1>
         </a>
         
        
            <div style="display: flex; justify-content: center;">
                <div class="search-button align-icon" onclick="toggleSearch()">
    <span class="search-icon">
        <i icon-name="search" ></i>
    </span>
    <span class="search-text">
        <span>Search</span>
        <span style="font-size: 0.6rem; padding: 2px 2px 0 6px; text-align:center; transform: translateY(4px);" class="search-keys">
            CTRL + K
        </span>
    </span>
</div>
            </div>
        
         <div class="folder" x-data="{isOpen: true}">
    
        <div x-show="isOpen" style="display:none" class="">
            
                <div class="folder inner-folder"  x-data="{isOpen: $persist(false).as('Posts')}" @click.stop="isOpen=!isOpen">
                    <div class="foldername-wrapper align-icon">
                    <i x-show="isOpen" style="display: none;"  icon-name="chevron-down"></i>
                    <i x-show="!isOpen"  icon-name="chevron-right"></i>
                    <span class="foldername">Posts</span>
                    </div>
                    
                        
    
    
                    
                        
    
        <div x-show="isOpen" style="display:none" class="filelist">
            
                <div class="folder inner-folder"  x-data="{isOpen: $persist(false).as('Posts/Personal')}" @click.stop="isOpen=!isOpen">
                    <div class="foldername-wrapper align-icon">
                    <i x-show="isOpen" style="display: none;"  icon-name="chevron-down"></i>
                    <i x-show="!isOpen"  icon-name="chevron-right"></i>
                    <span class="foldername">Personal</span>
                    </div>
                    
                        
    
        <div x-show="isOpen" style="display:none" class="filelist">
            
                <div @click.stop class="notelink "><i icon-name="sticky-note" aria-hidden="true"></i><a data-note-icon="" style="text-decoration: none;" class="filename" href="/gallery/">Gallery </a>
                </div>
            
        </div>
        
    
                    
                        
    
        <div x-show="isOpen" style="display:none" class="filelist">
            
                <div @click.stop class="notelink "><i icon-name="sticky-note" aria-hidden="true"></i><a data-note-icon="" style="text-decoration: none;" class="filename" href="/playlist/">Playlists </a>
                </div>
            
        </div>
        
    
                    
                        
    
        <div x-show="isOpen" style="display:none" class="filelist">
            
                <div @click.stop class="notelink "><i icon-name="sticky-note" aria-hidden="true"></i><a data-note-icon="" style="text-decoration: none;" class="filename" href="/rumi/">Rumi </a>
                </div>
            
        </div>
        
    
                    
                        
    
    
                    
                        
    
        <div x-show="isOpen" style="display:none" class="filelist">
            
                <div @click.stop class="notelink "><i icon-name="sticky-note" aria-hidden="true"></i><a data-note-icon="" style="text-decoration: none;" class="filename" href="/posts/personal/amsterdam-bunker-talks-experience-1/">Amsterdam BunkerTalks Experience 1 </a>
                </div>
            
        </div>
        
    
                    
                        
    
        <div x-show="isOpen" style="display:none" class="filelist">
            
                <div @click.stop class="notelink "><i icon-name="sticky-note" aria-hidden="true"></i><a data-note-icon="" style="text-decoration: none;" class="filename" href="/posts/personal/an-open-letter-to-javad-zarif/">An Open Letter to Javad Zarif </a>
                </div>
            
        </div>
        
    
                    
                        
    
        <div x-show="isOpen" style="display:none" class="filelist">
            
                <div @click.stop class="notelink "><i icon-name="sticky-note" aria-hidden="true"></i><a data-note-icon="" style="text-decoration: none;" class="filename" href="/posts/personal/an-open-letter-to-panic-buyers/">An Open Letter to Panic Buyers </a>
                </div>
            
        </div>
        
    
                    
                        
    
        <div x-show="isOpen" style="display:none" class="filelist">
            
                <div @click.stop class="notelink "><i icon-name="sticky-note" aria-hidden="true"></i><a data-note-icon="" style="text-decoration: none;" class="filename" href="/posts/personal/meta-cognition-framework/">Meta Cognition Framework </a>
                </div>
            
        </div>
        
    
                    
                        
    
        <div x-show="isOpen" style="display:none" class="filelist">
            
                <div @click.stop class="notelink "><i icon-name="sticky-note" aria-hidden="true"></i><a data-note-icon="" style="text-decoration: none;" class="filename" href="/posts/personal/my-thoughts-on-iran-s-political-situation-in-2022/">My Thoughts On Iran&#39;s Political Situation in 2022 </a>
                </div>
            
        </div>
        
    
                    
                        
    
        <div x-show="isOpen" style="display:none" class="filelist">
            
                <div @click.stop class="notelink "><i icon-name="sticky-note" aria-hidden="true"></i><a data-note-icon="" style="text-decoration: none;" class="filename" href="/posts/personal/the-price-of-change/">The Price of Change </a>
                </div>
            
        </div>
        
    
                    
                        
    
        <div x-show="isOpen" style="display:none" class="filelist">
            
                <div @click.stop class="notelink "><i icon-name="sticky-note" aria-hidden="true"></i><a data-note-icon="" style="text-decoration: none;" class="filename" href="/posts/personal/uneducated-unaffiliated-disinterested/">Uneducated, Unaffiliated, Disinterested </a>
                </div>
            
        </div>
        
    
                    
                </div>
            
        </div>
        
    
                    
                        
    
        <div x-show="isOpen" style="display:none" class="filelist">
            
                <div class="folder inner-folder"  x-data="{isOpen: $persist(false).as('Posts/Tech')}" @click.stop="isOpen=!isOpen">
                    <div class="foldername-wrapper align-icon">
                    <i x-show="isOpen" style="display: none;"  icon-name="chevron-down"></i>
                    <i x-show="!isOpen"  icon-name="chevron-right"></i>
                    <span class="foldername">Tech</span>
                    </div>
                    
                        
    
    
                    
                        
    
        <div x-show="isOpen" style="display:none" class="filelist">
            
        </div>
        
    
                    
                        
    
        <div x-show="isOpen" style="display:none" class="filelist">
            
                <div @click.stop class="notelink "><i icon-name="sticky-note" aria-hidden="true"></i><a data-note-icon="" style="text-decoration: none;" class="filename" href="/posts/tech/for-those-who-don-t-want-rust-analyzer-one-regex-to-rul-them-all/">For Those Who Don&#39;t Want rust-analyzer: One Regex to rul them all </a>
                </div>
            
        </div>
        
    
                    
                        
    
        <div x-show="isOpen" style="display:none" class="filelist">
            
                <div @click.stop class="notelink "><i icon-name="sticky-note" aria-hidden="true"></i><a data-note-icon="" style="text-decoration: none;" class="filename" href="/posts/tech/polkadot-s-build-horizon/">Polkadot&#39;s Build Horizon </a>
                </div>
            
        </div>
        
    
                    
                        
    
        <div x-show="isOpen" style="display:none" class="filelist">
            
                <div @click.stop class="notelink "><i icon-name="sticky-note" aria-hidden="true"></i><a data-note-icon="" style="text-decoration: none;" class="filename" href="/posts/tech/the-10x-developer-myth-all-about-keyboard/">The 10x Developer Myth: All About Keyboard </a>
                </div>
            
        </div>
        
    
                    
                        
    
        <div x-show="isOpen" style="display:none" class="filelist">
            
                <div @click.stop class="notelink "><i icon-name="sticky-note" aria-hidden="true"></i><a data-note-icon="" style="text-decoration: none;" class="filename" href="/posts/tech/thoughts-blockchain-and-blockspace-scalability/">Thoughts Blockchain and Blockspace Scalability </a>
                </div>
            
        </div>
        
    
                    
                </div>
            
        </div>
        
    
                    
                        
    
        <div x-show="isOpen" style="display:none" class="filelist">
            
        </div>
        
    
                    
                </div>
            
        </div>
        
    
    
        <div x-show="isOpen" style="display:none" class="">
            
                <div class="folder inner-folder"  x-data="{isOpen: $persist(false).as('Talks')}" @click.stop="isOpen=!isOpen">
                    <div class="foldername-wrapper align-icon">
                    <i x-show="isOpen" style="display: none;"  icon-name="chevron-down"></i>
                    <i x-show="!isOpen"  icon-name="chevron-right"></i>
                    <span class="foldername">Talks</span>
                    </div>
                    
                        
    
    
                    
                        
    
        <div x-show="isOpen" style="display:none" class="filelist">
            
                <div @click.stop class="notelink "><i icon-name="sticky-note" aria-hidden="true"></i><a data-note-icon="" style="text-decoration: none;" class="filename" href="/talks/persian-polkadot-seminar-for-rust-iran-community/">(Persian) Polkadot Seminar for Rust-Iran Community </a>
                </div>
            
        </div>
        
    
                    
                        
    
        <div x-show="isOpen" style="display:none" class="filelist">
            
                <div @click.stop class="notelink "><i icon-name="sticky-note" aria-hidden="true"></i><a data-note-icon="" style="text-decoration: none;" class="filename" href="/talks/persian-random-rust-video-tutorials/">(Persian) Random Rust Video Tutorials </a>
                </div>
            
        </div>
        
    
                    
                        
    
        <div x-show="isOpen" style="display:none" class="filelist">
            
                <div @click.stop class="notelink "><i icon-name="sticky-note" aria-hidden="true"></i><a data-note-icon="" style="text-decoration: none;" class="filename" href="/talks/nomination-pools-and-the-story-of-the-polkadot-s-n-po-s-polkadot-decoded-2022/">Nomination Pools and The Story of The Polkadot&#39;s NPoS | Polkadot Decoded 2022 </a>
                </div>
            
        </div>
        
    
                    
                        
    
        <div x-show="isOpen" style="display:none" class="filelist">
            
                <div @click.stop class="notelink "><i icon-name="sticky-note" aria-hidden="true"></i><a data-note-icon="" style="text-decoration: none;" class="filename" href="/talks/offline-phragmen-tool-and-substrate-debug-kit-substrate-seminar/">Offline Phragmen Tool and Substrate Debug Kit | Substrate Seminar </a>
                </div>
            
        </div>
        
    
                    
                        
    
        <div x-show="isOpen" style="display:none" class="filelist">
            
                <div @click.stop class="notelink "><i icon-name="sticky-note" aria-hidden="true"></i><a data-note-icon="" style="text-decoration: none;" class="filename" href="/talks/phragmen-and-the-n-po-s-problem-sub0-online/">Phragmen and The NPoS Problem | Sub0 Online </a>
                </div>
            
        </div>
        
    
                    
                        
    
        <div x-show="isOpen" style="display:none" class="filelist">
            
                <div @click.stop class="notelink "><i icon-name="sticky-note" aria-hidden="true"></i><a data-note-icon="" style="text-decoration: none;" class="filename" href="/talks/phragmen-overview-substrate-seminar/">Phragmen Overview | Substrate Seminar </a>
                </div>
            
        </div>
        
    
                    
                        
    
        <div x-show="isOpen" style="display:none" class="filelist">
            
                <div @click.stop class="notelink "><i icon-name="sticky-note" aria-hidden="true"></i><a data-note-icon="" style="text-decoration: none;" class="filename" href="/talks/polkadot-s-nominated-proof-of-stake-past-present-and-the-future-parity-and-friends/">Polkadot&#39;s Nominated Proof of Stake: Past, Present, and the Future | Parity and Friends </a>
                </div>
            
        </div>
        
    
                    
                </div>
            
        </div>
        
    
    
        <div x-show="isOpen" style="display:none" class="">
            
                <div @click.stop class="notelink "><i icon-name="sticky-note" aria-hidden="true"></i><a data-note-icon="" style="text-decoration: none;" class="filename" href="/">Home </a>
                </div>
            
        </div>
        
    </div>
      </nav>
    </div>

    

    
      <div class="search-container" id="globalsearch" onclick="toggleSearch()">
    <div class="search-box">
        <input type="search" id="term" placeholder="Start typing...">
        <div id="search-results"></div>
        <footer class="search-box-footer">
            <div class="navigation-hint">
                <span>Enter to select</span>
            </div>

            <div class="navigation-hint align-icon">
                <i  icon-name="arrow-up" aria-hidden="true"></i>
                <i  icon-name="arrow-down" aria-hidden="true"></i>
                <span>to navigate</span>
            </div>

            <div class="navigation-hint">
                <span>ESC to close</span>
            </div>

        </footer>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', init, false);
    document.addEventListener('DOMContentLoaded', setCorrectShortcut, false);

    window.toggleSearch = function () {
        if (document.getElementById('globalsearch').classList.contains('active')) {
            document
                .getElementById('globalsearch')
                .classList
                .remove('active');
        } else {
            document
                .getElementById('globalsearch')
                .classList
                .add('active');
            document
                .getElementById('term')
                .focus();
        }
    }

    window.toggleTagSearch = function (evt) {
        console.log(evt.textContent);
        const term = evt.textContent;
        if (term) {
            window
                .document
                .getElementById('term')
                .value = term.trim();
            window.toggleSearch();
            window.search();
        }
    }

    const loadingSvg = `
    <svg width="100" height="100" viewBox="0 0 45 45" xmlns="http://www.w3.org/2000/svg" stroke="#fff">
      <g fill="none" fill-rule="evenodd" transform="translate(1 1)" stroke-width="2">
          <circle cx="22" cy="22" r="6" stroke-opacity="0">
              <animate attributeName="r"
                   begin="1.5s" dur="3s"
                   values="6;22"
                   calcMode="linear"
                   repeatCount="indefinite" />
              <animate attributeName="stroke-opacity"
                   begin="1.5s" dur="3s"
                   values="1;0" calcMode="linear"
                   repeatCount="indefinite" />
              <animate attributeName="stroke-width"
                   begin="1.5s" dur="3s"
                   values="2;0" calcMode="linear"
                   repeatCount="indefinite" />
          </circle>
          <circle cx="22" cy="22" r="6" stroke-opacity="0">
              <animate attributeName="r"
                   begin="3s" dur="3s"
                   values="6;22"
                   calcMode="linear"
                   repeatCount="indefinite" />
              <animate attributeName="stroke-opacity"
                   begin="3s" dur="3s"
                   values="1;0" calcMode="linear"
                   repeatCount="indefinite" />
              <animate attributeName="stroke-width"
                   begin="3s" dur="3s"
                   values="2;0" calcMode="linear"
                   repeatCount="indefinite" />
          </circle>
          <circle cx="22" cy="22" r="8">
              <animate attributeName="r"
                   begin="0s" dur="1.5s"
                   values="6;1;2;3;4;5;6"
                   calcMode="linear"
                   repeatCount="indefinite" />
          </circle>
      </g>
  </svg>`;

    function debounce(func, wait, immediate) {
        var timeout;
        return function () {
            var context = this,
                args = arguments;
            var later = function () {
                timeout = null;
                if (!immediate) 
                    func.apply(context, args);
                };
            var callNow = immediate && !timeout;
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
            if (callNow) 
                func.apply(context, args);
            };
    };

    function setCorrectShortcut() {
        if (navigator.platform.toUpperCase().indexOf('MAC') >= 0) {
            document
                .querySelectorAll(".search-keys")
                .forEach(x => x.innerHTML = "⌘ + K");
        }
    }

    function createIndex(posts) {
        const encoder = (str) => str
            .toLowerCase()
            .split(/([^a-z]|[^\x00-\x7F])/)
        const contentIndex = new FlexSearch.Document({
            cache: true,
            charset: "latin:extra",
            optimize: true,
            index: [
                {
                    field: "content",
                    tokenize: "reverse",
                    encode: encoder
                }, {
                    field: "title",
                    tokenize: "forward",
                    encode: encoder
                }, {
                    field: "tags",
                    tokenize: "forward",
                    encode: encoder
                }
            ]
        })
        posts.forEach((p, idx) => {
            contentIndex.add({
                id: idx, title: p.title, content: p.content, tags: p.tags //Change to removeHTML
            })
        });
        return contentIndex;
    }

    async function init() {
        //init offline search index

        const searchIndexDate = '2024-06-27T16:27:16.833Z';
        let shouldFetch = true;
        if(localStorage.getItem("searchIndex")) {
            let {date, docs}= JSON.parse(localStorage.getItem('searchIndex'));
            if(date === searchIndexDate){
                shouldFetch = false;
                let index = createIndex(docs);
                window.docs = docs
                window.index = index;
            }        
        }
        if(shouldFetch){
            let docs = await(await fetch('/searchIndex.json?v=2024-06-27T16:27:16.833Z')).json();
            let index = createIndex(docs);
            localStorage.setItem("searchIndex", JSON.stringify({date: '2024-06-27T16:27:16.833Z', docs}));
            window.docs = docs
            window.index = index;
        }

        //open searchmodal when ctrl + k is pressed, cmd + k on mac
        document.addEventListener('keydown', (e) => {
            if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
                e.preventDefault();
                toggleSearch();
            }
            if (e.key === 'Escape') {
                document
                    .getElementById('globalsearch')
                    .classList
                    .remove('active');
            }

            //navigate search results with arrow keys
            if (document.getElementById('globalsearch').classList.contains('active')) {
                if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    let active = document.querySelector('.searchresult.active');
                    if (active) {
                        active
                            .classList
                            .remove('active');
                        if (active.nextElementSibling) {
                            active
                                .nextElementSibling
                                .classList
                                .add('active');
                        } else {
                            document
                                .querySelector('.searchresult')
                                .classList
                                .add('active');
                        }
                    } else {
                        document
                            .querySelector('.searchresult')
                            .classList
                            .add('active');
                    }

                    let currentActive = document.querySelector('.searchresult.active');
                    if (currentActive) {
                        currentActive.scrollIntoView({behavior: 'smooth', block: 'nearest', inline: 'start'});
                    }
                }
                if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    let active = document.querySelector('.searchresult.active');
                    if (active) {
                        active
                            .classList
                            .remove('active');
                        if (active.previousElementSibling) {
                            active
                                .previousElementSibling
                                .classList
                                .add('active');
                        } else {
                            document
                                .querySelectorAll('.searchresult')
                                .forEach((el) => {
                                    if (!el.nextElementSibling) {
                                        el
                                            .classList
                                            .add('active');
                                    }
                                });
                        }
                    } else {
                        document
                            .querySelectorAll('.searchresult')
                            .forEach((el) => {
                                if (el.nextElementSibling) {
                                    el
                                        .classList
                                        .add('active');
                                }
                            });
                    }

                    let currentActive = document.querySelector('.searchresult.active');
                    if (currentActive) {
                        currentActive.scrollIntoView({behavior: 'smooth', block: 'nearest', inline: 'start'});
                    }

                }
                if (e.key === 'Enter') {
                    e.preventDefault();
                    let active = document.querySelector('.searchresult.active');
                    if (active) {
                        window.location.href = active
                            .querySelector("a")
                            .href;
                    }
                }
            }
        });

        const debouncedSearch = debounce(search, 200, false);
        field = document.querySelector('#term');
        field.addEventListener('keydown', (e) => {
            if (e.key !== 'ArrowDown' && e.key !== 'ArrowUp') {
                debouncedSearch();
            }
        });
        resultsDiv = document.querySelector('#search-results');

        const params = new URL(location.href).searchParams;
        if (params.get('q')) {
            field.setAttribute('value', params.get('q'));
            toggleSearch();
            search();
        }
    }
    window.lastSearch = '';
    async function search() {
        let search = field
            .value
            .trim();
        if (!search) 
            return;
        if (search == lastSearch) 
            return;
        console.log(`search for ${search}`);
        window.lastSearch = search;

        resultsDiv.innerHTML = loadingSvg;
        //let searchRequest = await fetch(`/api/search?term=${encodeURIComponent(search)}`);
        //let results = await searchRequest.json();
        let results = offlineSearch(search);
        let resultsHTML = '';
        if (!results.length) {
            let resultParagraph = document.createElement("p");
            resultParagraph.innerText = `No results for "${search}"`;
            resultsDiv.innerHTML = '';
            resultsDiv.appendChild(resultParagraph);
            return;
        }
        resultsHTML += '<div style="max-width:100%;">';
        // we need to add title, url from ref
        results.forEach(r => {
            if(r.tags && r.tags.length > 0){
                resultsHTML += `<div class="searchresult">
                    <a class="search-link" href="${r.url}">${r.title}</a>
                    <div onclick="window.location='${r.url}'">
                        <div class="header-meta">
                            <div class="header-tags">
                                ${r.tags.map(tag=>'<a class="tag" href="JavaScript:Void(0);">#'+tag+'</a>').join("")}
                            </div>
                        </div>
                        ${r.content}
                    </div>
                </div>`;
            } else {
                resultsHTML += `<div class="searchresult">
                    <a class="search-link" href="${r.url}">${r.title}</a>
                    <div onclick="window.location='${r.url}'">
                        ${r.content}
                    </div>
                </div>`;
            }
        });
        resultsHTML += '</div>';
        resultsDiv.innerHTML = resultsHTML;
    }

    function truncate(str, size) {
        //first, remove HTML
        str = str.replaceAll(/<[^>]*>/g, '');
        if (str.length < size) 
            return str;
        return str.substring(0, size - 3) + '...';
    }

    function offlineSearch(searchQuery) {
        let data = window.docs;

        let isTagSearch = searchQuery[0] === "#" && searchQuery.length > 1;

        let searchResults = isTagSearch
            ? index.search(searchQuery.substring(1), [
                {
                    field: "tags"
                }
            ])
            : index.search(searchQuery, [
                {
                    field: "title",
                    limit: 5
                }, {
                    field: "content",
                    weight: 10
                }
            ]);

        const getByField = (field) => {
            const results = searchResults.filter((x) => x.field === field)
            if (results.length === 0) {
                return []
            } else {
                return [...results[0].result]
            }
        }
        const allIds = new Set([
            ...getByField("title"),
            ...getByField("content"),
            ...getByField("tags")
        ])
        const dataIds = [...allIds];
        const finalResults = dataIds.map((id) => {
            let result = data[id];
            result.content = truncate(result.content, 400);
            result.tags = result
                .tags
                .filter((x) => x != "gardenEntry" && x != "note"); //Note is automatically added by 11ty. GardenEntry is used internally to mark the home page

            return result;
        })
        return finalResults;

    }
</script>
    

    <main class="content cm-s-obsidian ">
      <header>
        
          <h1 data-note-icon="">Demystifying JAM</h1>
        
        <div class="header-meta">
          
            <div class="header-tags">
              
                
              
                
                  <a class="tag" onclick="toggleTagSearch(this)">
                    #polkadot
                  </a>
                
              
                
                  <a class="tag" onclick="toggleTagSearch(this)">
                    #jam
                  </a>
                
              
            </div>
          <div class="timestamps"><div><i icon-name="calendar-plus"></i> <span class="human-date" data-date="2024-05-02T17:08:56.000+03:30"></span></div><div><i icon-name="calendar-clock"></i> <span class="human-date" data-date="2024-06-27T19:55:44.069+03:30"></span></div></div></div>
      
      
      </header>
      
      
      <ul>
<li><a class="internal-link" data-note-icon="" href="/posts/tech/demystifying-jam/#prelude-polkadot-1">Prelude: Polkadot 1</a></li>
<li><a class="internal-link" data-note-icon="" href="/posts/tech/demystifying-jam/#all-about-cores">All About Cores</a></li>
<li><a class="internal-link" data-note-icon="" href="/posts/tech/demystifying-jam/#polkadot-2">Polkadot 2</a></li>
<li><a class="internal-link" data-note-icon="" href="/posts/tech/demystifying-jam/#inside-core-vs-on-the-chain">Inside Core vs. On the Chain</a></li>
<li><a class="internal-link" data-note-icon="" href="/posts/tech/demystifying-jam/#jam">JAM</a>
<ul>
<li><a class="internal-link" data-note-icon="" href="/posts/tech/demystifying-jam/#jam">Service and Work Items</a></li>
<li><a class="internal-link" data-note-icon="" href="/posts/tech/demystifying-jam/#jam">Semi Coherence</a></li>
<li><a class="internal-link" data-note-icon="" href="/posts/tech/demystifying-jam/#jam">CoreChain</a></li>
<li><a class="internal-link" data-note-icon="" href="/posts/tech/demystifying-jam/#jam">PVM</a></li>
</ul>
</li>
<li><a class="internal-link" data-note-icon="" href="/posts/tech/demystifying-jam/#appendix-re-defining-blockspace">Appendix: Re Defining Blockspace</a></li>
<li><a class="internal-link" data-note-icon="" href="/posts/tech/demystifying-jam/#appendix-scalability-space-map">Appendix: Scalability Space Map</a></li>
</ul>
<h2 id="prelude-polkadot-1" tabindex="-1">Prelude: Polkadot 1</h2>
<p>First, let's take a moment to jot down what I think are the top novel features of Polkadot. One on the technical side, and one on the social side.</p>
<ul>
<li>Social:
<ul>
<li>Biggest DAO. the only network that does fully onchain, self-enacting governance, including runtime upgrades.</li>
</ul>
</li>
<li>Technological:
<ul>
<li>Shared security, sharded execution</li>
<li>Use of a WASM-based meta-protocol. Storing the code of the blockchain in the state as byte-code.</li>
</ul>
</li>
</ul>
<p>Let's dive further into the second one.</p>
<h2 id="all-about-cores" tabindex="-1">All About Cores</h2>
<blockquote>
<p>For now, we are only talking in the context of a L1 network that hosts other L2 &quot;blockchain&quot; networks, much like Polkadot and Ethereum. Therefore, the words L2 and Parachain can be used interchangeably.</p>
</blockquote>
<p>The core problem with blockchain scalability can be put as: There exists a set of validator's who's execution can be trusted through crypto-economic and proof stake systems. But, it is very inefficient, and not scalable, to have all validators execute everything at all times.</p>
<blockquote>
<p>TODO: Diagram of a single threaded blockchain.</p>
</blockquote>
<p>In such a system, if the blockchain wants to host further L2s, all validators have to now re-execute the work of all rollups as well. Obviously, this will not scale. Optimistic rollups are one way to circumvent this issue, in that re-execution (aka. fraud-proofs) only happen if someone claims a fraud to have happened.</p>
<p>A naive solution to sharding is to merely split the validator set into smaller subsets, and have a small group of them re-execute the L2 block. What is the issue with this approach? we are sharding the economic security of the network as well.</p>
<blockquote>
<p>TODO: BAD Sharded Security</p>
</blockquote>
<p>Contrary to Optimistic Rollups that cannot afford re-execution at all times due to architectural shortcomings, Polkadot can have a subset of its validators re-execute a L2 block, while providing sufficient crypto-economical evidence to all network participants that the veracity of the block is as secure as if the entire set of validators had re-executed it. This is possible through the novel (recently formally published) ELVES paper.</p>
<blockquote>
<p>TODO: GOOD Shared Security</p>
</blockquote>
<p>That is, &quot;<em>Sharded Execution</em>&quot;, with &quot;<em>Shared Security</em>&quot;, the main technological outcomes of Polkadot 1 when it comes to scalability.</p>
<p>An execution-sharded blockchain is very much like a CPU: In much the same way that a CPU can have many cores and execute instructions in parallel, Polkadot can progress L2 blocks in parallel. This is why an L2 on Polkadot is called a <em><strong>Para</strong></em>chain, and the environment in which the smaller sub-group of validators re-execute a single L2 block is called a Core. Each core can be abstracted as &quot;a group of validators working in coordination&quot;.</p>
<p>You can imagine a single-threaded blockchain as one that ingests a single block at any given 6s time-slot, while Polkadot ingests 1 relay-chain block, and 1 parachain block per core, per time-slot</p>
<blockquote>
<p>TODO: animation</p>
</blockquote>
<h2 id="polkadot-2" tabindex="-1">Polkadot 2</h2>
<p>A bit part of Polkadot 2 is about making cores more flexibily use-able. In the original Polkadot model, a core could have been rented for 6m at a time.<br>
a single-chain using multiple cores, a single chain using cores infrequently.<br>
Very short, no need to spend more time here.</p>
<blockquote>
<p>TODO Diagram of long running task, and short running</p>
</blockquote>
<h2 id="inside-core-vs-on-the-chain" tabindex="-1">Inside Core vs. On the Chain</h2>
<p>To understand JAM, it is first useful to look into what happens in a Polkadot Core when an L2 block comes in.</p>
<blockquote>
<p>This contains a lot of simplification.</p>
</blockquote>
<blockquote>
<p>Recall that a core is constituted primarily from a group of validators. So, when we say some data is sent to the core, it is gossiped to this group of validators.</p>
</blockquote>
<ol start="0">
<li>An L2 Block + a subset of that L2's state is sent to the core. This is all the data that is needed to execute the block<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>.</li>
<li>Subset of validators, those that constitute a core, re-execute the L2 block and proceed with further consensus related tasks.</li>
<li>Make the data needed for other validators (outside of the core) available<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup> to re-execute the L2 block, if need be. Further validators might decide to re-execute this L2 block based on ELVES rules, and they need the data to do so.</li>
<li>Note that all of the operation so far is outside the the Polkadot's main block and state.</li>
<li>Eventually, a small commitment of the new L2 state becomes visible on the main Polkadot relay chain state. This operation, which is much cheaper than the actual re-execution of the L2 block, unlike everything thus far, affects the main Polkadot state, becomes visible in a Polkadot block, and is executed by all Polkadot validators<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup>.</li>
</ol>
<p>Let's deduce some new ideas from the above: From 1, we can deduce that there exists a new type of execution in Polkadot that differs from normal blockchain operations. Typically, when all validators of a network execute some work, and as the outcome, the main state is updated, we call this an on-chain operation. This is what happens in step 4. Yet, what happens inside a core differs from this. We call this novel type of blockchain computation <strong>in-core</strong> execution, and it is different from <strong>on-chain</strong> execution.</p>
<p>Next, from point 2 we can deduce that Polkadot already provides a native DA layer, and L2's automatically use it to keep their execution evidence present for some period of time. Yet, the type data that can be posted to this DA layer is fixed, and it is always the evidence needed to re-execute an L2 block.</p>
<p>Understanding the above is foundation of understanding majority of what JAM does. Before going further, a recap:</p>
<ul>
<li>in-core execution</li>
<li>on-chain execution</li>
<li>DA</li>
</ul>
<h2 id="jam" tabindex="-1">JAM</h2>
<p>With the understanding gained in <a class="internal-link" data-note-icon="" href="/posts/tech/demystifying-jam/#inside-core-vs-on-the-chain"><a class="tag" onclick="toggleTagSearch(this)" data-content="#Inside">#Inside</a> Core vs. On the Chain</a>, we can smoothly transition into what JAM is.</p>
<p>JAM is a new protocol, heavily inspired by Polkadot, and fully compatible with it, that aims to replace the Polkadot Relay Chain<sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup>.</p>
<p>JAM builds on top of <a class="internal-link" data-note-icon="" href="/posts/tech/demystifying-jam/#polkadot-2"><a class="tag" onclick="toggleTagSearch(this)" data-content="#Polkadot">#Polkadot</a> 2</a>, in that it tries to make Polkadot cores more useful, but in ways radically more flexible than <a class="internal-link" data-note-icon="" href="/posts/tech/demystifying-jam/#polkadot-2"><a class="tag" onclick="toggleTagSearch(this)" data-content="#Polkadot">#Polkadot</a> 2</a>.</p>
<p>The main observation of JAM is to alter Polkadot cores as follows:</p>
<ol>
<li>Allow both the work that is being done in-core and  on-chain to be fully programmable.</li>
<li>Allow any data to be read-from and written-into the Polkadot DA layer.</li>
</ol>
<p>Both of these stem from one key observation: &quot;Polkadot cores are amazingly powerful, why just use them to run L2s? they can run anything!&quot;.</p>
<h3 id="service-and-work-items" tabindex="-1">Service and Work Items</h3>
<p>This is why in the context of JAM, what used to called an L2/Parachain block is now called &quot;<em>Work</em><sup class="footnote-ref"><a href="#fn3" id="fnref3:1">[3:1]</a></sup>&quot;, a very generic term.</p>
<p>Moreover, the &quot;application&quot; to which a work belongs is called a <code>Service</code>. A service is described by 3 entry points, two of which are <code>fn join()</code> and <code>fn accumulate()</code>. The former describes what the service does in-core, and the latter describes what the service does on-chain.</p>
<p>Finally, the name of the two entry-points is why this protocol is called, JAM: the Join Accumulate Machine.</p>
<p>This is a somewhat simplistic, yet foundational and groud-up description of what JAM aims to be. Needless to say, a lot has been simplified here, and the protocol might still evolve.</p>
<p>On top of this foundation in mind, there are a few other aspects of JAM that now we can describe in the coming sections.</p>
<h3 id="semi-coherence" tabindex="-1">Semi Coherence</h3>
<p>TODO</p>
<h3 id="core-chain" tabindex="-1">CoreChain</h3>
<p>TODO</p>
<h3 id="pvm" tabindex="-1">PVM</h3>
<p>TODO</p>
<h2 id="appendix-re-defining-blockspace" tabindex="-1">Appendix: Re Defining Blockspace</h2>
<p>Polkadot's blockspace is therefore a combination of a lot of in-core blockspace, and a reasonable amount of on-chain blockspace.</p>
<h2 id="appendix-scalability-space-map" tabindex="-1">Appendix: Scalability Space Map</h2>
<ol>
<li>Beefy hardware + optimization: Solana</li>
<li>Optimistic Rollups</li>
<li>ZKP</li>
<li>Data and Execution Sharding</li>
</ol>
<p>A short digest from the graypaper.</p>
<hr>
<p><a href="https://ethresear.ch/t/bringing-polkadot-tech-to-ethereum/17104" target="_blank" class="external-link">https://ethresear.ch/t/bringing-polkadot-tech-to-ethereum/17104</a><br>
<a href="https://medium.com/coinmonks/polkadot-a-pessimistic-rollup-world-89fee1cfcd5f" target="_blank" class="external-link">https://medium.com/coinmonks/polkadot-a-pessimistic-rollup-world-89fee1cfcd5f</a><br>
<a href="https://miro.com/app/board/uXjVKT7riCM=/" target="_blank" class="external-link">https://miro.com/app/board/uXjVKT7riCM=/</a><br>
<a href="https://grillapp.net/@filippoweb3/136004" target="_blank" class="external-link">https://grillapp.net/@filippoweb3/136004</a><br>
<a href="https://github.com/openguild-labs/learn-jam" target="_blank" class="external-link">https://github.com/openguild-labs/learn-jam</a></p>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>We called the L2's state POV, and the combination of the two PVF. <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn2" class="footnote-item"><p>This is Polkadot's native Data Availability layer. <a href="#fnref2" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn3" class="footnote-item"><p>Terms like <code>WorkItem</code>, <code>WorkRrport</code>, <code>WorkPackage</code>. <a href="#fnref3" class="footnote-backref">↩︎</a> <a href="#fnref3:1" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn4" class="footnote-item"><p>It is crucial to already point out that JAM is only meant to replace the Polkadot relay chain. Parachains, and all applications that run on top of Polkadot remain intact, mainly thanks to <a class="internal-link" data-note-icon="" href="/posts/tech/demystifying-jam/#core-chain"><a class="tag" onclick="toggleTagSearch(this)" data-content="#CoreChain">#CoreChain</a></a>. <a href="#fnref4" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>

      
      
    </main>

    
      <aside>
      <div class="sidebar">
            <div class="sidebar-container">
                  
                  

                  
                        
                        
                              <div class="toc">
                                    <div class="toc-title-container">
                                          <div class="toc-title">
                                                On this page
                                          </div>
                                    </div>
                                    <div class="toc-container">
                                          <nav class="toc">
                <ol>
                    
                    <li><a href="#prelude-polkadot-1">Prelude: Polkadot 1</a>
            		</li>

                    <li><a href="#all-about-cores">All About Cores</a>
            		</li>

                    <li><a href="#polkadot-2">Polkadot 2</a>
            		</li>

                    <li><a href="#inside-core-vs-on-the-chain">Inside Core vs. On the Chain</a>
            		</li>

                    <li><a href="#jam">JAM</a>
            
                <ol>
                    
                    <li><a href="#service-and-work-items">Service and Work Items</a>
            		</li>

                    <li><a href="#semi-coherence">Semi Coherence</a>
            		</li>

                    <li><a href="#core-chain">CoreChain</a>
            		</li>

                    <li><a href="#pvm">PVM</a>
            		</li>
                </ol>
            		</li>

                    <li><a href="#appendix-re-defining-blockspace">Appendix: Re Defining Blockspace</a>
            		</li>

                    <li><a href="#appendix-scalability-space-map">Appendix: Scalability Space Map</a>
            		</li>
                </ol>
            </nav>
                                    </div>
                              </div>
                        

                  

                        
                  
            </div>
      </div>
</aside>
    

    
      
<style>
#tooltip-wrapper {
  background: var(--background-primary);
  padding: 1em;
  border-radius: 4px;
  overflow: hidden;
  position: fixed;
  width: 80%;
  max-width: 400px;
  height: auto;
  max-height: 300px;
  font-size: 0.8em;
  box-shadow: 0 5px 10px rgba(0,0,0,0.1);
  opacity: 0;
  transition: opacity 100ms;
  unicode-bidi: plaintext;
  overflow-y: scroll;
  z-index: 10;
}

#tooltip-wrapper:after {
  content: "";
  position: absolute;
  z-index: 1;
  bottom: 0;
  left: 0;
  pointer-events: none;
  width: 100%;
  unicode-bidi: plaintext;
  height: 75px;
}
</style>
<div style="opacity: 0; display: none;" id='tooltip-wrapper'>
  <div id='tooltip-content'>
  </div>
</div>

<iframe style="display: none; height: 0; width: 0;" id='link-preview-iframe' src="">
</iframe>

<script>
  var opacityTimeout;
  var contentTimeout;
  var transitionDurationMs = 100;

  var iframe = document.getElementById('link-preview-iframe')
  var tooltipWrapper = document.getElementById('tooltip-wrapper')
  var tooltipContent = document.getElementById('tooltip-content')

  var linkHistories = {};

  function hideTooltip() {
    opacityTimeout = setTimeout(function () {
      tooltipWrapper.style.opacity = 0;
      contentTimeout = setTimeout(function () {
        tooltipContent.innerHTML = '';
        tooltipWrapper.style.display = 'none';
      }, transitionDurationMs + 1);
    }, transitionDurationMs)
  }

  function showTooltip(event) {
    var elem = event.target;
    var elem_props = elem.getClientRects()[elem.getClientRects().length - 1];
    var top = window.pageYOffset || document.documentElement.scrollTop;
    var url = event.target.getAttribute("href");
    if (url.indexOf("http") === -1 || url.indexOf(window.location.host) !== -1) {
      let contentURL = url.split('#')[0]
      if (!linkHistories[contentURL]) {
        iframe.src = contentURL
        iframe.onload = function () {
          tooltipContentHtml = ''
          tooltipContentHtml += '<div style="font-weight: bold; unicode-bidi: plaintext;">' + iframe.contentWindow.document.querySelector('h1').innerHTML + '</div>'
          tooltipContentHtml += iframe.contentWindow.document.querySelector('.content').innerHTML
          tooltipContent.innerHTML = tooltipContentHtml
          linkHistories[contentURL] = tooltipContentHtml
          tooltipWrapper.style.display = 'block';
          tooltipWrapper.scrollTop = 0;
          setTimeout(function () {
            tooltipWrapper.style.opacity = 1;
            if (url.indexOf("#") != -1) {
              let id = url.split('#')[1];
              const focus = tooltipWrapper.querySelector(`[id='${id}']`);
              focus.classList.add('referred');
              console.log(focus);
              focus.scrollIntoView({behavior: 'smooth'}, true)
            } else {
              tooltipWrapper.scroll(0, 0);
            }
          }, 1)
        }
      } else {
        tooltipContent.innerHTML = linkHistories[contentURL]
        tooltipWrapper.style.display = 'block';
        setTimeout(function () {
          tooltipWrapper.style.opacity = 1;
          if (url.indexOf("#") != -1) {
              let id = url.split('#')[1];
              const focus = tooltipWrapper.querySelector(`[id='${id}']`);
              focus.classList.add('referred');
              focus.scrollIntoView({behavior: 'smooth'}, true)
          } else {
              tooltipWrapper.scroll(0, 0);
          }
        }, 1)
      }

      function getInnerWidth(elem) {
        var style = window.getComputedStyle(elem);
        return elem.offsetWidth - parseFloat(style.paddingLeft) - parseFloat(style.paddingRight) - parseFloat(style.borderLeft) - parseFloat(style.borderRight) - parseFloat(style.marginLeft) - parseFloat(style.marginRight);
      }

      tooltipWrapper.style.left = elem_props.left - (tooltipWrapper.offsetWidth / 2) + (elem_props.width / 2) + "px";

      if ((window.innerHeight - elem_props.top) < (tooltipWrapper.offsetHeight)) {
        tooltipWrapper.style.top = elem_props.top + top - tooltipWrapper.offsetHeight - 10 + "px";
      } else if ((window.innerHeight - elem_props.top) > (tooltipWrapper.offsetHeight)) {
        tooltipWrapper.style.top = elem_props.top + top + 35 + "px";
      }

      if ((elem_props.left + (elem_props.width / 2)) < (tooltipWrapper.offsetWidth / 2)) {
        tooltipWrapper.style.left = "10px";
      } else if ((document.body.clientWidth - elem_props.left - (elem_props.width / 2)) < (tooltipWrapper.offsetWidth / 2)) {
        tooltipWrapper.style.left = document.body.clientWidth - tooltipWrapper.offsetWidth - 20 + "px";
      }
    }
  }

  function setupListeners(linkElement) {
    linkElement.addEventListener('mouseleave', function (_event) {
      hideTooltip();
    });

    tooltipWrapper.addEventListener('mouseleave', function (_event) {
      hideTooltip();
    });

    linkElement.addEventListener('mouseenter', function (event) {
      clearTimeout(opacityTimeout);
      clearTimeout(contentTimeout);
      showTooltip(event);
    });

    tooltipWrapper.addEventListener('mouseenter', function (event) {
      clearTimeout(opacityTimeout);
      clearTimeout(contentTimeout);
    });
  }

  window.addEventListener("load", function(event) 
  {
    document.querySelectorAll('.internal-link').forEach(setupListeners);
    document.querySelectorAll('.backlink-card a').forEach(setupListeners);
  });
</script>

    
        <script>
      if (window.location.hash) {
        document.getElementById(window.location.hash.slice(1)).classList.add('referred');
      }
      window.addEventListener('hashchange', (evt) => {
        const oldParts = evt.oldURL.split("#");
        if (oldParts[1]) {
          document.getElementById(oldParts[1]).classList.remove('referred');
        }
        const newParts = evt.newURL.split("#");
        if (newParts[1]) {
          document.getElementById(newParts[1]).classList.add('referred');
        }
      }, false);
      const url_parts = window.location.href.split("#")
      const url = url_parts[0];
      const referrence = url_parts[1];
      document.querySelectorAll(".cm-s-obsidian > *[id]").forEach(function (el) {
        el.ondblclick = function(evt) {
          const ref_url = url + '#' + evt.target.id
          navigator.clipboard.writeText(ref_url);
      }
      });

      
    </script>
    <script src=" https://fastly.jsdelivr.net/npm/luxon@3.2.1/build/global/luxon.min.js "></script>
<script defer>
    TIMESTAMP_FORMAT = "MMM dd, yyyy";
    document.querySelectorAll('.human-date').forEach(function (el) {
        el.innerHTML = luxon.DateTime.fromISO(el.getAttribute('data-date') || el.innerText).toFormat(TIMESTAMP_FORMAT);
      });
</script>
    
    
    <script>
lucide.createIcons({
            attrs: {
                class: ["svg-icon"]
            }
        });
</script>
  </body>
</html>
