<aside id="floating-control">
    <span id="theme-switch">
        <i class="svg-icon light" icon-name="sun" aria-hidden="true"></i>
        <i class="svg-icon dark" icon-name="moon" aria-hidden="true"></i>
    </span>
</aside>


<script>
    function setThemeIcon(theme) {
        let toRemove;
        switch (theme) {
            case 'dark':
                toRemove = ['light'];
                break;
            case 'light':
                toRemove = ['dark'];
                break;
        }
        document.getElementById('theme-switch').classList.add([theme]);
		console.log(document.getElementById('theme-switch').classList)
        document.getElementById('theme-switch').classList.remove(...toRemove);
    }

	function setTheme(theme) {
		setThemeIcon(theme);
        if (theme == 'dark') {
            document.body.classList.remove('theme-light');
            document.body.classList.add('theme-dark');
        } else {
            document.body.classList.add('theme-light');
            document.body.classList.remove('theme-dark');
        }
    }

    let theme = window.localStorage.getItem('site-theme') || "dark";
	if (theme == "auto") {
		theme = "dark"
	}
	console.log(theme)
    setTheme(theme);
    window.theme = theme;
    window.localStorage.setItem('site-theme', theme);

    document.getElementById('theme-switch').addEventListener('click', function() {
        let theme = (window.theme === 'dark') ? 'light' : 'dark';
		console.log(theme)
        setTheme(theme);
        window.localStorage.setItem('site-theme', theme);
        window.theme = theme;
    })
</script>
